{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.statusFromToken = exports.resetState = void 0;\n\nconst types_1 = require(\"../types\"); // eslint-disable-next-line import/prefer-default-export\n\n\nconst resetState = state => Object.assign(Object.assign({}, state), {\n  gatewayStatus: types_1.GatewayStatus.UNKNOWN,\n  tokenRequested: false,\n  iframeMinimized: false,\n  firstTokenCheck: true,\n  renderIframe: false,\n  gatewayToken: undefined,\n  powoRequested: undefined,\n  refreshTimeoutId: undefined,\n  powoFinished: false,\n  refreshInProgress: false,\n  tokenIssuanceState: types_1.TokenIssuanceState.NOT_REQUESTED,\n  walletToRefresh: undefined,\n  walletPowoInProgress: false,\n  ownerTransactionConfirmed: false,\n  gatekeeperRecordState: undefined,\n  civicPass: {\n    status: types_1.CivicPassIssuanceStatus.NOT_REQUESTED,\n    iframeMinimized: false,\n    renderIframe: false\n  }\n});\n\nexports.resetState = resetState;\n\nconst hasExpired = gatewayToken => {\n  const now = Math.floor(Date.now() / 1000);\n  return !!gatewayToken.expiryTime && now >= gatewayToken.expiryTime;\n};\n\nconst isLocationNotSupported = recordState => {\n  if (!recordState) return false;\n  return [types_1.GatekeeperAPIStatus.LOCATION_NOT_SUPPORTED].includes(recordState);\n};\n\nconst isIssuedLocationNotSupported = recordState => {\n  if (!recordState) return false;\n  return [types_1.GatekeeperAPIStatus.ISSUED_LOCATION_NOT_SUPPORTED].includes(recordState);\n};\n\nconst isIssuedVpnNotSupported = recordState => {\n  if (!recordState) return false;\n  return [types_1.GatekeeperAPIStatus.ISSUED_VPN_NOT_SUPPORTED].includes(recordState);\n};\n\nconst isVpnNotSupported = recordState => {\n  if (!recordState) return false;\n  return [types_1.GatekeeperAPIStatus.VPN_NOT_SUPPORTED].includes(recordState);\n};\n\nconst statusFromToken = (state, gatewayToken) => {\n  if (!gatewayToken) return state.gatewayStatus;\n\n  switch (gatewayToken.state) {\n    case types_1.State.ACTIVE:\n      if (isLocationNotSupported(state.gatekeeperRecordState)) {\n        return types_1.GatewayStatus.LOCATION_NOT_SUPPORTED;\n      }\n\n      if (isVpnNotSupported(state.gatekeeperRecordState) || isIssuedVpnNotSupported(state.gatekeeperRecordState)) {\n        return types_1.GatewayStatus.VPN_NOT_SUPPORTED;\n      }\n\n      if (isIssuedLocationNotSupported(state.gatekeeperRecordState)) {\n        return types_1.GatewayStatus.REFRESH_TOKEN_REQUIRED;\n      }\n\n      if (state.gatewayStatus === types_1.GatewayStatus.PROOF_OF_WALLET_OWNERSHIP) {\n        return types_1.GatewayStatus.PROOF_OF_WALLET_OWNERSHIP;\n      }\n\n      return hasExpired(gatewayToken) ? types_1.GatewayStatus.REFRESH_TOKEN_REQUIRED : types_1.GatewayStatus.ACTIVE;\n\n    case types_1.State.REVOKED:\n      return types_1.GatewayStatus.REVOKED;\n\n    case types_1.State.FROZEN:\n      return types_1.GatewayStatus.FROZEN;\n\n    default:\n      return types_1.GatewayStatus.UNKNOWN;\n  }\n};\n\nexports.statusFromToken = statusFromToken;","map":{"version":3,"names":["Object","defineProperty","exports","value","statusFromToken","resetState","types_1","require","state","assign","gatewayStatus","GatewayStatus","UNKNOWN","tokenRequested","iframeMinimized","firstTokenCheck","renderIframe","gatewayToken","undefined","powoRequested","refreshTimeoutId","powoFinished","refreshInProgress","tokenIssuanceState","TokenIssuanceState","NOT_REQUESTED","walletToRefresh","walletPowoInProgress","ownerTransactionConfirmed","gatekeeperRecordState","civicPass","status","CivicPassIssuanceStatus","hasExpired","now","Math","floor","Date","expiryTime","isLocationNotSupported","recordState","GatekeeperAPIStatus","LOCATION_NOT_SUPPORTED","includes","isIssuedLocationNotSupported","ISSUED_LOCATION_NOT_SUPPORTED","isIssuedVpnNotSupported","ISSUED_VPN_NOT_SUPPORTED","isVpnNotSupported","VPN_NOT_SUPPORTED","State","ACTIVE","REFRESH_TOKEN_REQUIRED","PROOF_OF_WALLET_OWNERSHIP","REVOKED","FROZEN"],"sources":["D:/software/o5o BNB/o5o-staking-frontend/node_modules/@civic/common-gateway-react/dist/esm/useReducer/utils.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.statusFromToken = exports.resetState = void 0;\nconst types_1 = require(\"../types\");\n// eslint-disable-next-line import/prefer-default-export\nconst resetState = (state) => (Object.assign(Object.assign({}, state), { gatewayStatus: types_1.GatewayStatus.UNKNOWN, tokenRequested: false, iframeMinimized: false, firstTokenCheck: true, renderIframe: false, gatewayToken: undefined, powoRequested: undefined, refreshTimeoutId: undefined, powoFinished: false, refreshInProgress: false, tokenIssuanceState: types_1.TokenIssuanceState.NOT_REQUESTED, walletToRefresh: undefined, walletPowoInProgress: false, ownerTransactionConfirmed: false, gatekeeperRecordState: undefined, civicPass: {\n        status: types_1.CivicPassIssuanceStatus.NOT_REQUESTED,\n        iframeMinimized: false,\n        renderIframe: false,\n    } }));\nexports.resetState = resetState;\nconst hasExpired = (gatewayToken) => {\n    const now = Math.floor(Date.now() / 1000);\n    return !!gatewayToken.expiryTime && now >= gatewayToken.expiryTime;\n};\nconst isLocationNotSupported = (recordState) => {\n    if (!recordState)\n        return false;\n    return [types_1.GatekeeperAPIStatus.LOCATION_NOT_SUPPORTED].includes(recordState);\n};\nconst isIssuedLocationNotSupported = (recordState) => {\n    if (!recordState)\n        return false;\n    return [types_1.GatekeeperAPIStatus.ISSUED_LOCATION_NOT_SUPPORTED].includes(recordState);\n};\nconst isIssuedVpnNotSupported = (recordState) => {\n    if (!recordState)\n        return false;\n    return [types_1.GatekeeperAPIStatus.ISSUED_VPN_NOT_SUPPORTED].includes(recordState);\n};\nconst isVpnNotSupported = (recordState) => {\n    if (!recordState)\n        return false;\n    return [types_1.GatekeeperAPIStatus.VPN_NOT_SUPPORTED].includes(recordState);\n};\nconst statusFromToken = (state, gatewayToken) => {\n    if (!gatewayToken)\n        return state.gatewayStatus;\n    switch (gatewayToken.state) {\n        case types_1.State.ACTIVE:\n            if (isLocationNotSupported(state.gatekeeperRecordState)) {\n                return types_1.GatewayStatus.LOCATION_NOT_SUPPORTED;\n            }\n            if (isVpnNotSupported(state.gatekeeperRecordState) || isIssuedVpnNotSupported(state.gatekeeperRecordState)) {\n                return types_1.GatewayStatus.VPN_NOT_SUPPORTED;\n            }\n            if (isIssuedLocationNotSupported(state.gatekeeperRecordState)) {\n                return types_1.GatewayStatus.REFRESH_TOKEN_REQUIRED;\n            }\n            if (state.gatewayStatus === types_1.GatewayStatus.PROOF_OF_WALLET_OWNERSHIP) {\n                return types_1.GatewayStatus.PROOF_OF_WALLET_OWNERSHIP;\n            }\n            return hasExpired(gatewayToken) ? types_1.GatewayStatus.REFRESH_TOKEN_REQUIRED : types_1.GatewayStatus.ACTIVE;\n        case types_1.State.REVOKED:\n            return types_1.GatewayStatus.REVOKED;\n        case types_1.State.FROZEN:\n            return types_1.GatewayStatus.FROZEN;\n        default:\n            return types_1.GatewayStatus.UNKNOWN;\n    }\n};\nexports.statusFromToken = statusFromToken;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}