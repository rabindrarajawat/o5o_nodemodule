{"ast":null,"code":"import { PublicKey } from '@solana/web3.js';\nimport { GpaBuilder } from '../../utils/GpaBuilder.mjs'; // TODO(thlorenz): copied from candy machine SDK\n// SDK should either provide a GPA builder or expose this discriminator\n\nconst candyMachineV2Discriminator = [51, 173, 177, 113, 25, 241, 109, 189];\nconst AUTHORITY = candyMachineV2Discriminator.length;\nconst WALLET = AUTHORITY + PublicKey.default.toBytes().byteLength;\n\nclass CandyMachineV2GpaBuilder extends GpaBuilder {\n  whereDiscriminator(discrimator) {\n    return this.where(0, Buffer.from(discrimator));\n  }\n\n  candyMachineAccounts() {\n    return this.whereDiscriminator(candyMachineV2Discriminator);\n  } // wallet same as solTreasury\n\n\n  candyMachineAccountsForWallet(wallet) {\n    return this.candyMachineAccounts().where(WALLET, wallet.toBase58());\n  }\n\n  candyMachineAccountsForAuthority(authority) {\n    return this.candyMachineAccounts().where(AUTHORITY, authority.toBase58());\n  }\n\n}\n\nexport { CandyMachineV2GpaBuilder };","map":{"version":3,"sources":["../../../../src/plugins/candyMachineV2Module/gpaBuilders.ts"],"names":["candyMachineV2Discriminator","AUTHORITY","length","WALLET","PublicKey","default","toBytes","byteLength","CandyMachineV2GpaBuilder","GpaBuilder","whereDiscriminator","discrimator","where","Buffer","from","candyMachineAccounts","candyMachineAccountsForWallet","wallet","toBase58","candyMachineAccountsForAuthority","authority"],"mappings":";yDAaA;AACA;;AACA,MAAMA,2BAAiD,GAAG,CACxD,EADwD,EACpD,GADoD,EAC/C,GAD+C,EAC1C,GAD0C,EACrC,EADqC,EACjC,GADiC,EAC5B,GAD4B,EACvB,GADuB,CAA1D;AAIA,MAAMC,SAAS,GAAGD,2BAA2B,CAACE,MAA9C;AACA,MAAMC,MAAM,GAAGF,SAAS,GAAGG,SAAS,CAACC,OAAVD,CAAkBE,OAAlBF,GAA4BG,UAAvD;;AAEO,MAAMC,wBAAN,SAAuCC,UAAvC,CAAkD;EACvDC,kBAAkB,CAACC,WAAD,EAAoC;IACpD,OAAO,KAAKC,KAAL,CAAW,CAAX,EAAcC,MAAM,CAACC,IAAPD,CAAYF,WAAZE,CAAd,CAAP;EACF;;EAEAE,oBAAoB,GAAG;IACrB,OAAO,KAAKL,kBAAL,CAAwBV,2BAAxB,CAAP;EACF,CAPuD,CASvD;;;EACAgB,6BAA6B,CAACC,MAAD,EAAoB;IAC/C,OAAO,KAAKF,oBAAL,GAA4BH,KAA5B,CAAkCT,MAAlC,EAA0Cc,MAAM,CAACC,QAAPD,EAA1C,CAAP;EACF;;EAEAE,gCAAgC,CAACC,SAAD,EAAuB;IACrD,OAAO,KAAKL,oBAAL,GAA4BH,KAA5B,CAAkCX,SAAlC,EAA6CmB,SAAS,CAACF,QAAVE,EAA7C,CAAP;EACF;;AAhBuD","sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { GpaBuilder } from '@/utils';\n\ntype AccountDiscriminator = [\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number\n];\n// TODO(thlorenz): copied from candy machine SDK\n// SDK should either provide a GPA builder or expose this discriminator\nconst candyMachineV2Discriminator: AccountDiscriminator = [\n  51, 173, 177, 113, 25, 241, 109, 189,\n];\n\nconst AUTHORITY = candyMachineV2Discriminator.length;\nconst WALLET = AUTHORITY + PublicKey.default.toBytes().byteLength;\n\nexport class CandyMachineV2GpaBuilder extends GpaBuilder {\n  whereDiscriminator(discrimator: AccountDiscriminator) {\n    return this.where(0, Buffer.from(discrimator));\n  }\n\n  candyMachineAccounts() {\n    return this.whereDiscriminator(candyMachineV2Discriminator);\n  }\n\n  // wallet same as solTreasury\n  candyMachineAccountsForWallet(wallet: PublicKey) {\n    return this.candyMachineAccounts().where(WALLET, wallet.toBase58());\n  }\n\n  candyMachineAccountsForAuthority(authority: PublicKey) {\n    return this.candyMachineAccounts().where(AUTHORITY, authority.toBase58());\n  }\n}\n"]},"metadata":{},"sourceType":"module"}