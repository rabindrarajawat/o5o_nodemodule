{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deleteInstruction = exports.transferInstruction = exports.updateInstruction = exports.createInstruction = void 0;\n\nconst web3_js_1 = require(\"@solana/web3.js\");\n\nconst utils_1 = require(\"./utils\");\n\nfunction createInstruction(nameProgramId, systemProgramId, nameKey, nameOwnerKey, payerKey, hashed_name, lamports, space, nameClassKey, nameParent, nameParentOwner) {\n  const buffers = [Buffer.from(Int8Array.from([0])), new utils_1.Numberu32(hashed_name.length).toBuffer(), hashed_name, lamports.toBuffer(), space.toBuffer()];\n  const data = Buffer.concat(buffers);\n  const keys = [{\n    pubkey: systemProgramId,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: payerKey,\n    isSigner: true,\n    isWritable: true\n  }, {\n    pubkey: nameKey,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: nameOwnerKey,\n    isSigner: false,\n    isWritable: false\n  }];\n\n  if (nameClassKey) {\n    keys.push({\n      pubkey: nameClassKey,\n      isSigner: true,\n      isWritable: false\n    });\n  } else {\n    keys.push({\n      pubkey: new web3_js_1.PublicKey(Buffer.alloc(32)),\n      isSigner: false,\n      isWritable: false\n    });\n  }\n\n  if (nameParent) {\n    keys.push({\n      pubkey: nameParent,\n      isSigner: false,\n      isWritable: false\n    });\n  } else {\n    keys.push({\n      pubkey: new web3_js_1.PublicKey(Buffer.alloc(32)),\n      isSigner: false,\n      isWritable: false\n    });\n  }\n\n  if (nameParentOwner) {\n    keys.push({\n      pubkey: nameParentOwner,\n      isSigner: true,\n      isWritable: false\n    });\n  }\n\n  return new web3_js_1.TransactionInstruction({\n    keys: keys,\n    programId: nameProgramId,\n    data: data\n  });\n}\n\nexports.createInstruction = createInstruction;\n\nfunction updateInstruction(nameProgramId, nameAccountKey, offset, input_data, nameUpdateSigner, parentNameKey) {\n  const buffers = [Buffer.from(Int8Array.from([1])), offset.toBuffer(), new utils_1.Numberu32(input_data.length).toBuffer(), input_data];\n  const data = Buffer.concat(buffers);\n  const keys = [{\n    pubkey: nameAccountKey,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: nameUpdateSigner,\n    isSigner: true,\n    isWritable: false\n  }];\n\n  if (parentNameKey) {\n    keys.push({\n      pubkey: parentNameKey,\n      isSigner: false,\n      isWritable: false\n    });\n  }\n\n  return new web3_js_1.TransactionInstruction({\n    keys: keys,\n    programId: nameProgramId,\n    data: data\n  });\n}\n\nexports.updateInstruction = updateInstruction;\n\nfunction transferInstruction(nameProgramId, nameAccountKey, newOwnerKey, currentNameOwnerKey, nameClassKey, nameParent) {\n  const buffers = [Buffer.from(Int8Array.from([2])), newOwnerKey.toBuffer()];\n  const data = Buffer.concat(buffers);\n  const keys = [{\n    pubkey: nameAccountKey,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: currentNameOwnerKey,\n    isSigner: true,\n    isWritable: false\n  }];\n\n  if (nameClassKey) {\n    keys.push({\n      pubkey: nameClassKey,\n      isSigner: true,\n      isWritable: false\n    });\n  }\n\n  if (nameParent) {\n    keys.push({\n      pubkey: nameParent,\n      isSigner: false,\n      isWritable: false\n    });\n  }\n\n  return new web3_js_1.TransactionInstruction({\n    keys: keys,\n    programId: nameProgramId,\n    data: data\n  });\n}\n\nexports.transferInstruction = transferInstruction;\n\nfunction deleteInstruction(nameProgramId, nameAccountKey, refundTargetKey, nameOwnerKey) {\n  const buffers = [Buffer.from(Int8Array.from([3]))];\n  const data = Buffer.concat(buffers);\n  const keys = [{\n    pubkey: nameAccountKey,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: nameOwnerKey,\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: refundTargetKey,\n    isSigner: false,\n    isWritable: true\n  }];\n  return new web3_js_1.TransactionInstruction({\n    keys: keys,\n    programId: nameProgramId,\n    data: data\n  });\n}\n\nexports.deleteInstruction = deleteInstruction;","map":{"version":3,"sources":["../src/instructions.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.deleteInstruction = exports.transferInstruction = exports.updateInstruction = exports.createInstruction = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst utils_1 = require(\"./utils\");\nfunction createInstruction(nameProgramId, systemProgramId, nameKey, nameOwnerKey, payerKey, hashed_name, lamports, space, nameClassKey, nameParent, nameParentOwner) {\n    const buffers = [\n        Buffer.from(Int8Array.from([0])),\n        new utils_1.Numberu32(hashed_name.length).toBuffer(),\n        hashed_name,\n        lamports.toBuffer(),\n        space.toBuffer(),\n    ];\n    const data = Buffer.concat(buffers);\n    const keys = [\n        {\n            pubkey: systemProgramId,\n            isSigner: false,\n            isWritable: false,\n        },\n        {\n            pubkey: payerKey,\n            isSigner: true,\n            isWritable: true,\n        },\n        {\n            pubkey: nameKey,\n            isSigner: false,\n            isWritable: true,\n        },\n        {\n            pubkey: nameOwnerKey,\n            isSigner: false,\n            isWritable: false,\n        },\n    ];\n    if (nameClassKey) {\n        keys.push({\n            pubkey: nameClassKey,\n            isSigner: true,\n            isWritable: false,\n        });\n    }\n    else {\n        keys.push({\n            pubkey: new web3_js_1.PublicKey(Buffer.alloc(32)),\n            isSigner: false,\n            isWritable: false,\n        });\n    }\n    if (nameParent) {\n        keys.push({\n            pubkey: nameParent,\n            isSigner: false,\n            isWritable: false,\n        });\n    }\n    else {\n        keys.push({\n            pubkey: new web3_js_1.PublicKey(Buffer.alloc(32)),\n            isSigner: false,\n            isWritable: false,\n        });\n    }\n    if (nameParentOwner) {\n        keys.push({\n            pubkey: nameParentOwner,\n            isSigner: true,\n            isWritable: false,\n        });\n    }\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        programId: nameProgramId,\n        data,\n    });\n}\nexports.createInstruction = createInstruction;\nfunction updateInstruction(nameProgramId, nameAccountKey, offset, input_data, nameUpdateSigner, parentNameKey) {\n    const buffers = [\n        Buffer.from(Int8Array.from([1])),\n        offset.toBuffer(),\n        new utils_1.Numberu32(input_data.length).toBuffer(),\n        input_data,\n    ];\n    const data = Buffer.concat(buffers);\n    const keys = [\n        {\n            pubkey: nameAccountKey,\n            isSigner: false,\n            isWritable: true,\n        },\n        {\n            pubkey: nameUpdateSigner,\n            isSigner: true,\n            isWritable: false,\n        },\n    ];\n    if (parentNameKey) {\n        keys.push({\n            pubkey: parentNameKey,\n            isSigner: false,\n            isWritable: false,\n        });\n    }\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        programId: nameProgramId,\n        data,\n    });\n}\nexports.updateInstruction = updateInstruction;\nfunction transferInstruction(nameProgramId, nameAccountKey, newOwnerKey, currentNameOwnerKey, nameClassKey, nameParent) {\n    const buffers = [Buffer.from(Int8Array.from([2])), newOwnerKey.toBuffer()];\n    const data = Buffer.concat(buffers);\n    const keys = [\n        {\n            pubkey: nameAccountKey,\n            isSigner: false,\n            isWritable: true,\n        },\n        {\n            pubkey: currentNameOwnerKey,\n            isSigner: true,\n            isWritable: false,\n        },\n    ];\n    if (nameClassKey) {\n        keys.push({\n            pubkey: nameClassKey,\n            isSigner: true,\n            isWritable: false,\n        });\n    }\n    if (nameParent) {\n        keys.push({\n            pubkey: nameParent,\n            isSigner: false,\n            isWritable: false,\n        });\n    }\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        programId: nameProgramId,\n        data,\n    });\n}\nexports.transferInstruction = transferInstruction;\nfunction deleteInstruction(nameProgramId, nameAccountKey, refundTargetKey, nameOwnerKey) {\n    const buffers = [Buffer.from(Int8Array.from([3]))];\n    const data = Buffer.concat(buffers);\n    const keys = [\n        {\n            pubkey: nameAccountKey,\n            isSigner: false,\n            isWritable: true,\n        },\n        {\n            pubkey: nameOwnerKey,\n            isSigner: true,\n            isWritable: false,\n        },\n        {\n            pubkey: refundTargetKey,\n            isSigner: false,\n            isWritable: true,\n        },\n    ];\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        programId: nameProgramId,\n        data,\n    });\n}\nexports.deleteInstruction = deleteInstruction;\n//# sourceMappingURL=instructions.js.map"]},"metadata":{},"sourceType":"script"}