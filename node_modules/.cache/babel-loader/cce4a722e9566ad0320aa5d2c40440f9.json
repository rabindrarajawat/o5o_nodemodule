{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends = require(\"@swc/helpers/lib/_extends.js\").default;\n\nvar _interop_require_default = require(\"@swc/helpers/lib/_interop_require_default.js\").default;\n\nvar _react = _interop_require_default(require(\"react\"));\n\nvar _loadableContext = require(\"./loadable-context\");\n\nconst {\n  useSyncExternalStore: useSyncExternalStore\n} = process.env.__NEXT_REACT_ROOT ? require('react') : require('use-sync-external-store/shim');\nconst ALL_INITIALIZERS = [];\nconst READY_INITIALIZERS = [];\nlet initialized = false;\n\nfunction load(loader) {\n  let promise = loader();\n  let state = {\n    loading: true,\n    loaded: null,\n    error: null\n  };\n  state.promise = promise.then(loaded => {\n    state.loading = false;\n    state.loaded = loaded;\n    return loaded;\n  }).catch(err => {\n    state.loading = false;\n    state.error = err;\n    throw err;\n  });\n  return state;\n}\n\nfunction resolve(obj) {\n  return obj && obj.__esModule ? obj.default : obj;\n}\n\nfunction createLoadableComponent(loadFn, options) {\n  let opts = Object.assign({\n    loader: null,\n    loading: null,\n    delay: 200,\n    timeout: null,\n    webpack: null,\n    modules: null,\n    suspense: false\n  }, options);\n\n  if (opts.suspense) {\n    opts.lazy = _react.default.lazy(opts.loader);\n  }\n  /** @type LoadableSubscription */\n\n\n  let subscription = null;\n\n  function init() {\n    if (!subscription) {\n      const sub = new LoadableSubscription(loadFn, opts);\n      subscription = {\n        getCurrentValue: sub.getCurrentValue.bind(sub),\n        subscribe: sub.subscribe.bind(sub),\n        retry: sub.retry.bind(sub),\n        promise: sub.promise.bind(sub)\n      };\n    }\n\n    return subscription.promise();\n  } // Server only\n\n\n  if (typeof window === 'undefined') {\n    ALL_INITIALIZERS.push(init);\n  } // Client only\n\n\n  if (!initialized && typeof window !== 'undefined') {\n    // require.resolveWeak check is needed for environments that don't have it available like Jest\n    const moduleIds = opts.webpack && typeof require.resolveWeak === 'function' ? opts.webpack() : opts.modules;\n\n    if (moduleIds) {\n      READY_INITIALIZERS.push(ids => {\n        for (const moduleId of moduleIds) {\n          if (ids.indexOf(moduleId) !== -1) {\n            return init();\n          }\n        }\n      });\n    }\n  }\n\n  function useLoadableModule() {\n    init();\n\n    const context = _react.default.useContext(_loadableContext.LoadableContext);\n\n    if (context && Array.isArray(opts.modules)) {\n      opts.modules.forEach(moduleName => {\n        context(moduleName);\n      });\n    }\n  }\n\n  function LoadableImpl(props, ref) {\n    useLoadableModule();\n    const state = useSyncExternalStore(subscription.subscribe, subscription.getCurrentValue, subscription.getCurrentValue);\n\n    _react.default.useImperativeHandle(ref, () => ({\n      retry: subscription.retry\n    }), []);\n\n    return _react.default.useMemo(() => {\n      if (state.loading || state.error) {\n        return _react.default.createElement(opts.loading, {\n          isLoading: state.loading,\n          pastDelay: state.pastDelay,\n          timedOut: state.timedOut,\n          error: state.error,\n          retry: subscription.retry\n        });\n      } else if (state.loaded) {\n        return _react.default.createElement(resolve(state.loaded), props);\n      } else {\n        return null;\n      }\n    }, [props, state]);\n  }\n\n  function LazyImpl(props, ref) {\n    useLoadableModule();\n    return _react.default.createElement(opts.lazy, _extends({}, props, {\n      ref: ref\n    }));\n  }\n\n  const LoadableComponent = opts.suspense ? LazyImpl : LoadableImpl;\n\n  LoadableComponent.preload = () => init();\n\n  LoadableComponent.displayName = 'LoadableComponent';\n  return _react.default.forwardRef(LoadableComponent);\n}\n\nclass LoadableSubscription {\n  promise() {\n    return this._res.promise;\n  }\n\n  retry() {\n    this._clearTimeouts();\n\n    this._res = this._loadFn(this._opts.loader);\n    this._state = {\n      pastDelay: false,\n      timedOut: false\n    };\n    const {\n      _res: res,\n      _opts: opts\n    } = this;\n\n    if (res.loading) {\n      if (typeof opts.delay === 'number') {\n        if (opts.delay === 0) {\n          this._state.pastDelay = true;\n        } else {\n          this._delay = setTimeout(() => {\n            this._update({\n              pastDelay: true\n            });\n          }, opts.delay);\n        }\n      }\n\n      if (typeof opts.timeout === 'number') {\n        this._timeout = setTimeout(() => {\n          this._update({\n            timedOut: true\n          });\n        }, opts.timeout);\n      }\n    }\n\n    this._res.promise.then(() => {\n      this._update({});\n\n      this._clearTimeouts();\n    }).catch(_err => {\n      this._update({});\n\n      this._clearTimeouts();\n    });\n\n    this._update({});\n  }\n\n  _update(partial) {\n    this._state = _extends({}, this._state, {\n      error: this._res.error,\n      loaded: this._res.loaded,\n      loading: this._res.loading\n    }, partial);\n\n    this._callbacks.forEach(callback => callback());\n  }\n\n  _clearTimeouts() {\n    clearTimeout(this._delay);\n    clearTimeout(this._timeout);\n  }\n\n  getCurrentValue() {\n    return this._state;\n  }\n\n  subscribe(callback) {\n    this._callbacks.add(callback);\n\n    return () => {\n      this._callbacks.delete(callback);\n    };\n  }\n\n  constructor(loadFn, opts) {\n    this._loadFn = loadFn;\n    this._opts = opts;\n    this._callbacks = new Set();\n    this._delay = null;\n    this._timeout = null;\n    this.retry();\n  }\n\n}\n\nfunction Loadable(opts) {\n  return createLoadableComponent(load, opts);\n}\n\nfunction flushInitializers(initializers, ids) {\n  let promises = [];\n\n  while (initializers.length) {\n    let init = initializers.pop();\n    promises.push(init(ids));\n  }\n\n  return Promise.all(promises).then(() => {\n    if (initializers.length) {\n      return flushInitializers(initializers, ids);\n    }\n  });\n}\n\nLoadable.preloadAll = () => {\n  return new Promise((resolveInitializers, reject) => {\n    flushInitializers(ALL_INITIALIZERS).then(resolveInitializers, reject);\n  });\n};\n\nLoadable.preloadReady = function () {\n  let ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return new Promise(resolvePreload => {\n    const res = () => {\n      initialized = true;\n      return resolvePreload();\n    }; // We always will resolve, errors should be handled within loading UIs.\n\n\n    flushInitializers(READY_INITIALIZERS, ids).then(res, res);\n  });\n};\n\nif (typeof window !== 'undefined') {\n  window.__NEXT_PRELOADREADY = Loadable.preloadReady;\n}\n\nvar _default = Loadable;\nexports.default = _default;","map":{"version":3,"sources":["../../../shared/lib/loadable.js"],"names":["useSyncExternalStore","process","env","__NEXT_REACT_ROOT","require","ALL_INITIALIZERS","READY_INITIALIZERS","initialized","load","loader","promise","state","loading","loaded","error","then","catch","err","resolve","obj","__esModule","default","createLoadableComponent","loadFn","options","opts","Object","assign","delay","timeout","webpack","modules","suspense","lazy","React","subscription","init","sub","LoadableSubscription","getCurrentValue","bind","subscribe","retry","window","push","moduleIds","resolveWeak","ids","moduleId","indexOf","useLoadableModule","context","useContext","LoadableContext","Array","isArray","forEach","moduleName","LoadableImpl","props","ref","useImperativeHandle","useMemo","createElement","isLoading","pastDelay","timedOut","LazyImpl","LoadableComponent","preload","displayName","forwardRef","constructor","_loadFn","_opts","_callbacks","Set","_delay","_timeout","_res","_clearTimeouts","_state","res","setTimeout","_update","_err","partial","callback","clearTimeout","add","delete","Loadable","flushInitializers","initializers","promises","length","pop","Promise","all","preloadAll","resolveInitializers","reject","preloadReady","resolvePreload","__NEXT_PRELOADREADY"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = void 0;\nvar _extends = require(\"@swc/helpers/lib/_extends.js\").default;\nvar _interop_require_default = require(\"@swc/helpers/lib/_interop_require_default.js\").default;\nvar _react = _interop_require_default(require(\"react\"));\nvar _loadableContext = require(\"./loadable-context\");\nconst { useSyncExternalStore  } = process.env.__NEXT_REACT_ROOT ? require('react') : require('use-sync-external-store/shim');\nconst ALL_INITIALIZERS = [];\nconst READY_INITIALIZERS = [];\nlet initialized = false;\nfunction load(loader) {\n    let promise = loader();\n    let state = {\n        loading: true,\n        loaded: null,\n        error: null\n    };\n    state.promise = promise.then((loaded)=>{\n        state.loading = false;\n        state.loaded = loaded;\n        return loaded;\n    }).catch((err)=>{\n        state.loading = false;\n        state.error = err;\n        throw err;\n    });\n    return state;\n}\nfunction resolve(obj) {\n    return obj && obj.__esModule ? obj.default : obj;\n}\nfunction createLoadableComponent(loadFn, options) {\n    let opts = Object.assign({\n        loader: null,\n        loading: null,\n        delay: 200,\n        timeout: null,\n        webpack: null,\n        modules: null,\n        suspense: false\n    }, options);\n    if (opts.suspense) {\n        opts.lazy = _react.default.lazy(opts.loader);\n    }\n    /** @type LoadableSubscription */ let subscription = null;\n    function init() {\n        if (!subscription) {\n            const sub = new LoadableSubscription(loadFn, opts);\n            subscription = {\n                getCurrentValue: sub.getCurrentValue.bind(sub),\n                subscribe: sub.subscribe.bind(sub),\n                retry: sub.retry.bind(sub),\n                promise: sub.promise.bind(sub)\n            };\n        }\n        return subscription.promise();\n    }\n    // Server only\n    if (typeof window === 'undefined') {\n        ALL_INITIALIZERS.push(init);\n    }\n    // Client only\n    if (!initialized && typeof window !== 'undefined') {\n        // require.resolveWeak check is needed for environments that don't have it available like Jest\n        const moduleIds = opts.webpack && typeof require.resolveWeak === 'function' ? opts.webpack() : opts.modules;\n        if (moduleIds) {\n            READY_INITIALIZERS.push((ids)=>{\n                for (const moduleId of moduleIds){\n                    if (ids.indexOf(moduleId) !== -1) {\n                        return init();\n                    }\n                }\n            });\n        }\n    }\n    function useLoadableModule() {\n        init();\n        const context = _react.default.useContext(_loadableContext.LoadableContext);\n        if (context && Array.isArray(opts.modules)) {\n            opts.modules.forEach((moduleName)=>{\n                context(moduleName);\n            });\n        }\n    }\n    function LoadableImpl(props, ref) {\n        useLoadableModule();\n        const state = useSyncExternalStore(subscription.subscribe, subscription.getCurrentValue, subscription.getCurrentValue);\n        _react.default.useImperativeHandle(ref, ()=>({\n                retry: subscription.retry\n            }), []);\n        return _react.default.useMemo(()=>{\n            if (state.loading || state.error) {\n                return _react.default.createElement(opts.loading, {\n                    isLoading: state.loading,\n                    pastDelay: state.pastDelay,\n                    timedOut: state.timedOut,\n                    error: state.error,\n                    retry: subscription.retry\n                });\n            } else if (state.loaded) {\n                return _react.default.createElement(resolve(state.loaded), props);\n            } else {\n                return null;\n            }\n        }, [\n            props,\n            state\n        ]);\n    }\n    function LazyImpl(props, ref) {\n        useLoadableModule();\n        return _react.default.createElement(opts.lazy, _extends({}, props, {\n            ref\n        }));\n    }\n    const LoadableComponent = opts.suspense ? LazyImpl : LoadableImpl;\n    LoadableComponent.preload = ()=>init();\n    LoadableComponent.displayName = 'LoadableComponent';\n    return _react.default.forwardRef(LoadableComponent);\n}\nclass LoadableSubscription {\n    promise() {\n        return this._res.promise;\n    }\n    retry() {\n        this._clearTimeouts();\n        this._res = this._loadFn(this._opts.loader);\n        this._state = {\n            pastDelay: false,\n            timedOut: false\n        };\n        const { _res: res , _opts: opts  } = this;\n        if (res.loading) {\n            if (typeof opts.delay === 'number') {\n                if (opts.delay === 0) {\n                    this._state.pastDelay = true;\n                } else {\n                    this._delay = setTimeout(()=>{\n                        this._update({\n                            pastDelay: true\n                        });\n                    }, opts.delay);\n                }\n            }\n            if (typeof opts.timeout === 'number') {\n                this._timeout = setTimeout(()=>{\n                    this._update({\n                        timedOut: true\n                    });\n                }, opts.timeout);\n            }\n        }\n        this._res.promise.then(()=>{\n            this._update({});\n            this._clearTimeouts();\n        }).catch((_err)=>{\n            this._update({});\n            this._clearTimeouts();\n        });\n        this._update({});\n    }\n    _update(partial) {\n        this._state = _extends({}, this._state, {\n            error: this._res.error,\n            loaded: this._res.loaded,\n            loading: this._res.loading\n        }, partial);\n        this._callbacks.forEach((callback)=>callback());\n    }\n    _clearTimeouts() {\n        clearTimeout(this._delay);\n        clearTimeout(this._timeout);\n    }\n    getCurrentValue() {\n        return this._state;\n    }\n    subscribe(callback) {\n        this._callbacks.add(callback);\n        return ()=>{\n            this._callbacks.delete(callback);\n        };\n    }\n    constructor(loadFn, opts){\n        this._loadFn = loadFn;\n        this._opts = opts;\n        this._callbacks = new Set();\n        this._delay = null;\n        this._timeout = null;\n        this.retry();\n    }\n}\nfunction Loadable(opts) {\n    return createLoadableComponent(load, opts);\n}\nfunction flushInitializers(initializers, ids) {\n    let promises = [];\n    while(initializers.length){\n        let init = initializers.pop();\n        promises.push(init(ids));\n    }\n    return Promise.all(promises).then(()=>{\n        if (initializers.length) {\n            return flushInitializers(initializers, ids);\n        }\n    });\n}\nLoadable.preloadAll = ()=>{\n    return new Promise((resolveInitializers, reject)=>{\n        flushInitializers(ALL_INITIALIZERS).then(resolveInitializers, reject);\n    });\n};\nLoadable.preloadReady = (ids = [])=>{\n    return new Promise((resolvePreload)=>{\n        const res = ()=>{\n            initialized = true;\n            return resolvePreload();\n        };\n        // We always will resolve, errors should be handled within loading UIs.\n        flushInitializers(READY_INITIALIZERS, ids).then(res, res);\n    });\n};\nif (typeof window !== 'undefined') {\n    window.__NEXT_PRELOADREADY = Loadable.preloadReady;\n}\nvar _default = Loadable;\nexports.default = _default;\n\n//# sourceMappingURL=loadable.js.map"]},"metadata":{},"sourceType":"script"}