{"ast":null,"code":"import { PublicKey } from '@solana/web3.js';\nimport { GpaBuilder } from '../../../utils/GpaBuilder.mjs'; // TODO: copied from auction house SDK\n// SDK should either provide a GPA builder or expose this discriminator\n\nconst bidReceiptDiscriminator = [186, 150, 141, 135, 59, 122, 39, 99];\nconst PUBLIC_KEY_LENGTH = PublicKey.default.toBytes().byteLength;\nconst TRADE_STATE = bidReceiptDiscriminator.length;\nconst BOOKKEEPER = TRADE_STATE + PUBLIC_KEY_LENGTH;\nconst AUCTION_HOUSE = BOOKKEEPER + PUBLIC_KEY_LENGTH;\nconst BUYER = AUCTION_HOUSE + PUBLIC_KEY_LENGTH;\nconst METADATA = BUYER + PUBLIC_KEY_LENGTH;\n\nclass BidReceiptGpaBuilder extends GpaBuilder {\n  whereDiscriminator(discrimator) {\n    return this.where(0, Buffer.from(discrimator));\n  }\n\n  bidReceiptAccounts() {\n    return this.whereDiscriminator(bidReceiptDiscriminator);\n  }\n\n  whereAuctionHouse(auctionHouseAddress) {\n    return this.bidReceiptAccounts().where(AUCTION_HOUSE, auctionHouseAddress);\n  }\n\n  whereBuyer(buyerAddress) {\n    return this.where(BUYER, buyerAddress);\n  }\n\n  whereMetadata(metadataAddress) {\n    return this.where(METADATA, metadataAddress);\n  }\n\n}\n\nexport { BidReceiptGpaBuilder };","map":{"version":3,"sources":["../../../../../src/plugins/auctionHouseModule/gpaBuilders/BidReceiptGpaBuilder.ts"],"names":["bidReceiptDiscriminator","PUBLIC_KEY_LENGTH","PublicKey","default","toBytes","byteLength","TRADE_STATE","length","BOOKKEEPER","AUCTION_HOUSE","BUYER","METADATA","BidReceiptGpaBuilder","GpaBuilder","whereDiscriminator","discrimator","where","Buffer","from","bidReceiptAccounts","whereAuctionHouse","auctionHouseAddress","whereBuyer","buyerAddress","whereMetadata","metadataAddress"],"mappings":";4DAaA;AACA;;AACA,MAAMA,uBAA6C,GAAG,CACpD,GADoD,EAC/C,GAD+C,EAC1C,GAD0C,EACrC,GADqC,EAChC,EADgC,EAC5B,GAD4B,EACvB,EADuB,EACnB,EADmB,CAAtD;AAIA,MAAMC,iBAAiB,GAAGC,SAAS,CAACC,OAAVD,CAAkBE,OAAlBF,GAA4BG,UAAtD;AAEA,MAAMC,WAAW,GAAGN,uBAAuB,CAACO,MAA5C;AACA,MAAMC,UAAU,GAAGF,WAAW,GAAGL,iBAAjC;AACA,MAAMQ,aAAa,GAAGD,UAAU,GAAGP,iBAAnC;AACA,MAAMS,KAAK,GAAGD,aAAa,GAAGR,iBAA9B;AACA,MAAMU,QAAQ,GAAGD,KAAK,GAAGT,iBAAzB;;AAEO,MAAMW,oBAAN,SAAmCC,UAAnC,CAA8C;EACnDC,kBAAkB,CAACC,WAAD,EAAoC;IACpD,OAAO,KAAKC,KAAL,CAAW,CAAX,EAAcC,MAAM,CAACC,IAAPD,CAAYF,WAAZE,CAAd,CAAP;EACF;;EAEAE,kBAAkB,GAAG;IACnB,OAAO,KAAKL,kBAAL,CAAwBd,uBAAxB,CAAP;EACF;;EAEAoB,iBAAiB,CAACC,mBAAD,EAAiC;IAChD,OAAO,KAAKF,kBAAL,GAA0BH,KAA1B,CAAgCP,aAAhC,EAA+CY,mBAA/C,CAAP;EACF;;EAEAC,UAAU,CAACC,YAAD,EAA0B;IAClC,OAAO,KAAKP,KAAL,CAAWN,KAAX,EAAkBa,YAAlB,CAAP;EACF;;EAEAC,aAAa,CAACC,eAAD,EAA6B;IACxC,OAAO,KAAKT,KAAL,CAAWL,QAAX,EAAqBc,eAArB,CAAP;EACF;;AAnBmD","sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { GpaBuilder } from '@/utils';\n\ntype AccountDiscriminator = [\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number\n];\n// TODO: copied from auction house SDK\n// SDK should either provide a GPA builder or expose this discriminator\nconst bidReceiptDiscriminator: AccountDiscriminator = [\n  186, 150, 141, 135, 59, 122, 39, 99,\n];\n\nconst PUBLIC_KEY_LENGTH = PublicKey.default.toBytes().byteLength;\n\nconst TRADE_STATE = bidReceiptDiscriminator.length;\nconst BOOKKEEPER = TRADE_STATE + PUBLIC_KEY_LENGTH;\nconst AUCTION_HOUSE = BOOKKEEPER + PUBLIC_KEY_LENGTH;\nconst BUYER = AUCTION_HOUSE + PUBLIC_KEY_LENGTH;\nconst METADATA = BUYER + PUBLIC_KEY_LENGTH;\n\nexport class BidReceiptGpaBuilder extends GpaBuilder {\n  whereDiscriminator(discrimator: AccountDiscriminator) {\n    return this.where(0, Buffer.from(discrimator));\n  }\n\n  bidReceiptAccounts() {\n    return this.whereDiscriminator(bidReceiptDiscriminator);\n  }\n\n  whereAuctionHouse(auctionHouseAddress: PublicKey) {\n    return this.bidReceiptAccounts().where(AUCTION_HOUSE, auctionHouseAddress);\n  }\n\n  whereBuyer(buyerAddress: PublicKey) {\n    return this.where(BUYER, buyerAddress);\n  }\n\n  whereMetadata(metadataAddress: PublicKey) {\n    return this.where(METADATA, metadataAddress);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}