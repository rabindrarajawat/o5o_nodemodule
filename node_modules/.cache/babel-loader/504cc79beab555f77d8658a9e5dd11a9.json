{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deleteInstruction = exports.transferInstruction = exports.updateInstruction = exports.createInstruction = void 0;\n\nconst web3_js_1 = require(\"@solana/web3.js\");\n\nconst utils_1 = require(\"./utils\");\n\nfunction createInstruction(nameProgramId, systemProgramId, nameKey, nameOwnerKey, payerKey, hashed_name, lamports, space, nameClassKey, nameParent, nameParentOwner) {\n  const buffers = [Buffer.from(Int8Array.from([0])), new utils_1.Numberu32(hashed_name.length).toBuffer(), hashed_name, lamports.toBuffer(), space.toBuffer()];\n  const data = Buffer.concat(buffers);\n  const keys = [{\n    pubkey: systemProgramId,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: payerKey,\n    isSigner: true,\n    isWritable: true\n  }, {\n    pubkey: nameKey,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: nameOwnerKey,\n    isSigner: false,\n    isWritable: false\n  }];\n\n  if (nameClassKey) {\n    keys.push({\n      pubkey: nameClassKey,\n      isSigner: true,\n      isWritable: false\n    });\n  } else {\n    keys.push({\n      pubkey: new web3_js_1.PublicKey(Buffer.alloc(32)),\n      isSigner: false,\n      isWritable: false\n    });\n  }\n\n  if (nameParent) {\n    keys.push({\n      pubkey: nameParent,\n      isSigner: false,\n      isWritable: false\n    });\n  } else {\n    keys.push({\n      pubkey: new web3_js_1.PublicKey(Buffer.alloc(32)),\n      isSigner: false,\n      isWritable: false\n    });\n  }\n\n  if (nameParentOwner) {\n    keys.push({\n      pubkey: nameParentOwner,\n      isSigner: true,\n      isWritable: false\n    });\n  }\n\n  return new web3_js_1.TransactionInstruction({\n    keys,\n    programId: nameProgramId,\n    data\n  });\n}\n\nexports.createInstruction = createInstruction;\n\nfunction updateInstruction(nameProgramId, nameAccountKey, offset, input_data, nameUpdateSigner, parentNameKey) {\n  const buffers = [Buffer.from(Int8Array.from([1])), offset.toBuffer(), new utils_1.Numberu32(input_data.length).toBuffer(), input_data];\n  const data = Buffer.concat(buffers);\n  const keys = [{\n    pubkey: nameAccountKey,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: nameUpdateSigner,\n    isSigner: true,\n    isWritable: false\n  }];\n\n  if (parentNameKey) {\n    keys.push({\n      pubkey: parentNameKey,\n      isSigner: false,\n      isWritable: false\n    });\n  }\n\n  return new web3_js_1.TransactionInstruction({\n    keys,\n    programId: nameProgramId,\n    data\n  });\n}\n\nexports.updateInstruction = updateInstruction;\n\nfunction transferInstruction(nameProgramId, nameAccountKey, newOwnerKey, currentNameOwnerKey, nameClassKey, nameParent) {\n  const buffers = [Buffer.from(Int8Array.from([2])), newOwnerKey.toBuffer()];\n  const data = Buffer.concat(buffers);\n  const keys = [{\n    pubkey: nameAccountKey,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: currentNameOwnerKey,\n    isSigner: true,\n    isWritable: false\n  }];\n\n  if (nameClassKey) {\n    keys.push({\n      pubkey: nameClassKey,\n      isSigner: true,\n      isWritable: false\n    });\n  }\n\n  if (nameParent) {\n    keys.push({\n      pubkey: nameParent,\n      isSigner: false,\n      isWritable: false\n    });\n  }\n\n  return new web3_js_1.TransactionInstruction({\n    keys,\n    programId: nameProgramId,\n    data\n  });\n}\n\nexports.transferInstruction = transferInstruction;\n\nfunction deleteInstruction(nameProgramId, nameAccountKey, refundTargetKey, nameOwnerKey) {\n  const buffers = [Buffer.from(Int8Array.from([3]))];\n  const data = Buffer.concat(buffers);\n  const keys = [{\n    pubkey: nameAccountKey,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: nameOwnerKey,\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: refundTargetKey,\n    isSigner: false,\n    isWritable: true\n  }];\n  return new web3_js_1.TransactionInstruction({\n    keys,\n    programId: nameProgramId,\n    data\n  });\n}\n\nexports.deleteInstruction = deleteInstruction;","map":{"version":3,"mappings":"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","names":["createInstruction","nameProgramId","systemProgramId","nameKey","nameOwnerKey","payerKey","hashed_name","lamports","space","nameClassKey","nameParent","nameParentOwner","buffers","Buffer","from","Int8Array","utils_1","length","toBuffer","data","concat","keys","pubkey","isSigner","isWritable","push","web3_js_1","alloc","programId","exports","updateInstruction","nameAccountKey","offset","input_data","nameUpdateSigner","parentNameKey","transferInstruction","newOwnerKey","currentNameOwnerKey","deleteInstruction","refundTargetKey"],"sourceRoot":"","sources":["../src/instructions.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}