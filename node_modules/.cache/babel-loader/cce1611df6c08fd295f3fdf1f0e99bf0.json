{"ast":null,"code":"import { useWallet } from '@solana/wallet-adapter-react';\nimport React, { useCallback, useLayoutEffect, useMemo, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Button } from './Button';\nimport { Collapse } from './Collapse';\nimport { useWalletModal } from './useWalletModal';\nimport { WalletListItem } from './WalletListItem';\nexport const WalletModal = _ref => {\n  let {\n    className = '',\n    logo,\n    featuredWallets = 3,\n    container = 'body'\n  } = _ref;\n  const ref = useRef(null);\n  const {\n    wallets,\n    select\n  } = useWallet();\n  const {\n    setVisible\n  } = useWalletModal();\n  const [expanded, setExpanded] = useState(false);\n  const [fadeIn, setFadeIn] = useState(false);\n  const [portal, setPortal] = useState(null);\n  const [featured, more] = useMemo(() => [wallets.slice(0, featuredWallets), wallets.slice(featuredWallets)], [wallets, featuredWallets]);\n  const hideModal = useCallback(() => {\n    setFadeIn(false);\n    setTimeout(() => setVisible(false), 150);\n  }, [setFadeIn, setVisible]);\n  const handleClose = useCallback(event => {\n    event.preventDefault();\n    hideModal();\n  }, [hideModal]);\n  const handleWalletClick = useCallback((event, walletName) => {\n    select(walletName);\n    handleClose(event);\n  }, [select, handleClose]);\n  const handleCollapseClick = useCallback(() => setExpanded(!expanded), [setExpanded, expanded]);\n  const handleTabKey = useCallback(event => {\n    const node = ref.current;\n    if (!node) return; // here we query all focusable elements\n\n    const focusableElements = node.querySelectorAll('button');\n    const firstElement = focusableElements[0];\n    const lastElement = focusableElements[focusableElements.length - 1];\n\n    if (event.shiftKey) {\n      // if going backward by pressing tab and firstElement is active, shift focus to last focusable element\n      if (document.activeElement === firstElement) {\n        lastElement.focus();\n        event.preventDefault();\n      }\n    } else {\n      // if going forward by pressing tab and lastElement is active, shift focus to first focusable element\n      if (document.activeElement === lastElement) {\n        firstElement.focus();\n        event.preventDefault();\n      }\n    }\n  }, [ref]);\n  useLayoutEffect(() => {\n    const handleKeyDown = event => {\n      if (event.key === 'Escape') {\n        hideModal();\n      } else if (event.key === 'Tab') {\n        handleTabKey(event);\n      }\n    }; // Get original overflow\n\n\n    const {\n      overflow\n    } = window.getComputedStyle(document.body); // Hack to enable fade in animation after mount\n\n    setTimeout(() => setFadeIn(true), 0); // Prevent scrolling on mount\n\n    document.body.style.overflow = 'hidden'; // Listen for keydown events\n\n    window.addEventListener('keydown', handleKeyDown, false);\n    return () => {\n      // Re-enable scrolling when component unmounts\n      document.body.style.overflow = overflow;\n      window.removeEventListener('keydown', handleKeyDown, false);\n    };\n  }, [hideModal, handleTabKey]);\n  useLayoutEffect(() => setPortal(document.querySelector(container)), [setPortal, container]);\n  return portal && createPortal(React.createElement(\"div\", {\n    \"aria-labelledby\": \"wallet-adapter-modal-title\",\n    \"aria-modal\": \"true\",\n    className: `wallet-adapter-modal ${fadeIn && 'wallet-adapter-modal-fade-in'} ${className}`,\n    ref: ref,\n    role: \"dialog\"\n  }, React.createElement(\"div\", {\n    className: \"wallet-adapter-modal-container\"\n  }, React.createElement(\"div\", {\n    className: `wallet-adapter-modal-wrapper ${!logo && 'wallet-adapter-modal-wrapper-no-logo'}`\n  }, logo && React.createElement(\"div\", {\n    className: \"wallet-adapter-modal-logo-wrapper\"\n  }, typeof logo === 'string' ? React.createElement(\"img\", {\n    alt: \"logo\",\n    className: \"wallet-adapter-modal-logo\",\n    src: logo\n  }) : logo), React.createElement(\"h1\", {\n    className: \"wallet-adapter-modal-title\",\n    id: \"wallet-adapter-modal-title\"\n  }, \"Connect Wallet\"), React.createElement(\"button\", {\n    onClick: handleClose,\n    className: \"wallet-adapter-modal-button-close\"\n  }, React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\"\n  }, React.createElement(\"path\", {\n    d: \"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\"\n  }))), React.createElement(\"ul\", {\n    className: \"wallet-adapter-modal-list\"\n  }, featured.map(wallet => React.createElement(WalletListItem, {\n    key: wallet.name,\n    handleClick: event => handleWalletClick(event, wallet.name),\n    wallet: wallet\n  }))), more.length ? React.createElement(React.Fragment, null, React.createElement(Collapse, {\n    expanded: expanded,\n    id: \"wallet-adapter-modal-collapse\"\n  }, React.createElement(\"ul\", {\n    className: \"wallet-adapter-modal-list\"\n  }, more.map(wallet => React.createElement(WalletListItem, {\n    key: wallet.name,\n    handleClick: event => handleWalletClick(event, wallet.name),\n    tabIndex: expanded ? 0 : -1,\n    wallet: wallet\n  })))), React.createElement(Button, {\n    \"aria-controls\": \"wallet-adapter-modal-collapse\",\n    \"aria-expanded\": expanded,\n    className: `wallet-adapter-modal-collapse-button ${expanded && 'wallet-adapter-modal-collapse-button-active'}`,\n    endIcon: React.createElement(\"svg\", {\n      width: \"11\",\n      height: \"6\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    }, React.createElement(\"path\", {\n      d: \"m5.938 5.73 4.28-4.126a.915.915 0 0 0 0-1.322 1 1 0 0 0-1.371 0L5.253 3.736 1.659.272a1 1 0 0 0-1.371 0A.93.93 0 0 0 0 .932c0 .246.1.48.288.662l4.28 4.125a.99.99 0 0 0 1.37.01z\"\n    })),\n    onClick: handleCollapseClick\n  }, expanded ? 'Less' : 'More', \" options\")) : null)), React.createElement(\"div\", {\n    className: \"wallet-adapter-modal-overlay\",\n    onMouseDown: handleClose\n  })), portal);\n};","map":{"version":3,"mappings":"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","names":["useWallet","React","useCallback","useLayoutEffect","useMemo","useRef","useState","createPortal","Button","Collapse","useWalletModal","WalletListItem","WalletModal","className","logo","featuredWallets","container","ref","wallets","select","setVisible","expanded","setExpanded","fadeIn","setFadeIn","portal","setPortal","featured","more","slice","hideModal","setTimeout","handleClose","event","preventDefault","handleWalletClick","walletName","handleCollapseClick","handleTabKey","node","current","focusableElements","querySelectorAll","firstElement","lastElement","length","shiftKey","document","activeElement","focus","handleKeyDown","key","overflow","window","getComputedStyle","body","style","addEventListener","removeEventListener","querySelector","role","alt","src","id","onClick","width","height","d","map","wallet","name","handleClick","tabIndex","endIcon","xmlns","onMouseDown"],"sourceRoot":"","sources":["../src/WalletModal.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}