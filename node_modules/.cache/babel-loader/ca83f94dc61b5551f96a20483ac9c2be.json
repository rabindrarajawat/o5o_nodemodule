{"ast":null,"code":"import { candyGuardBeet, CandyGuard } from '@metaplex-foundation/mpl-candy-guard';\nimport { CANDY_GUARD_DATA } from '../constants.mjs';\nimport { isModel, assertModel } from '../../../types/Model.mjs';\nimport { createSerializerFromSolitaType, deserializeAccount } from '../../../types/Serializer.mjs';\nimport { toAccountInfo } from '../../../types/Account.mjs';\nimport { Pda } from '../../../types/Pda.mjs';\n/** @group Model Helpers */\n\nconst isCandyGuard = value => isModel('candyGuard', value);\n/** @group Model Helpers */\n\n\nfunction assertCandyGuard(value) {\n  assertModel(isCandyGuard(value), `Expected CandyGuard model`);\n}\n/** @group Model Helpers */\n\n\nconst toCandyGuard = (account, metaplex) => {\n  const candyGuardSerializer = createSerializerFromSolitaType(CandyGuard, candyGuardBeet.description);\n  const parsedCandyGuard = deserializeAccount(account, candyGuardSerializer);\n  const {\n    guards,\n    groups\n  } = metaplex.candyMachines().guards().deserializeSettings(account.data.slice(CANDY_GUARD_DATA), account.owner);\n  return {\n    model: 'candyGuard',\n    address: new Pda(parsedCandyGuard.publicKey, parsedCandyGuard.data.bump),\n    accountInfo: toAccountInfo(account),\n    baseAddress: parsedCandyGuard.data.base,\n    authorityAddress: parsedCandyGuard.data.authority,\n    guards,\n    groups\n  };\n};\n\nexport { assertCandyGuard, isCandyGuard, toCandyGuard };","map":{"version":3,"sources":["../../../../../src/plugins/candyMachineModule/models/CandyGuard.ts"],"names":["isCandyGuard","value","isModel","assertCandyGuard","assertModel","toCandyGuard","account","metaplex","candyGuardSerializer","createSerializerFromSolitaType","MplCandyGuard","candyGuardBeet","description","parsedCandyGuard","deserializeAccount","guards","groups","candyMachines","deserializeSettings","data","slice","CANDY_GUARD_DATA","owner","model","address","Pda","publicKey","bump","accountInfo","toAccountInfo","baseAddress","base","authorityAddress","authority"],"mappings":";;;;;;AAyDA;;AACO,MAAMA,YAAY,GACvBC,KAAU,IACiBC,OAAO,CAAC,YAAD,EAAeD,KAAf,CAF7B;AAIP;;;AACO,SAASE,gBAAT,CACLF,KADK,EAE2B;EAChCG,WAAW,CAACJ,YAAY,CAACC,KAAD,CAAb,EAAuB,2BAAvB,CAAXG;AACF;AAEA;;;MACaC,YAAY,GAAG,CAC1BC,OAD0B,EAE1BC,QAF0B,KAGR;EAClB,MAAMC,oBAAoB,GAAGC,8BAA8B,CACzDC,UADyD,EAEzDC,cAAc,CAACC,WAF0C,CAA3D;EAIA,MAAMC,gBAAgB,GAAGC,kBAAkB,CAACR,OAAD,EAAUE,oBAAV,CAA3C;EAEA,MAAM;IAAEO,MAAF;IAAUC;EAAV,IAAqBT,QAAQ,CAChCU,aADwBV,GAExBQ,MAFwBR,GAGxBW,mBAHwBX,CAIvBD,OAAO,CAACa,IAARb,CAAac,KAAbd,CAAmBe,gBAAnBf,CAJuBC,EAKvBD,OAAO,CAACgB,KALef,CAA3B;EAQA,OAAO;IACLgB,KAAK,EAAE,YADF;IAELC,OAAO,EAAE,IAAIC,GAAJ,CAAQZ,gBAAgB,CAACa,SAAzB,EAAoCb,gBAAgB,CAACM,IAAjBN,CAAsBc,IAA1D,CAFJ;IAGLC,WAAW,EAAEC,aAAa,CAACvB,OAAD,CAHrB;IAILwB,WAAW,EAAEjB,gBAAgB,CAACM,IAAjBN,CAAsBkB,IAJ9B;IAKLC,gBAAgB,EAAEnB,gBAAgB,CAACM,IAAjBN,CAAsBoB,SALnC;IAMLlB,MANK;IAOLC;EAPK,CAAP;AASF,C","sourcesContent":["import {\n  CandyGuard as MplCandyGuard,\n  candyGuardBeet,\n} from '@metaplex-foundation/mpl-candy-guard';\nimport { CANDY_GUARD_DATA } from '../constants';\nimport { CandyGuardsSettings } from '../guards';\nimport {\n  AccountInfo,\n  assertModel,\n  createSerializerFromSolitaType,\n  deserializeAccount,\n  isModel,\n  Model,\n  Pda,\n  PublicKey,\n  toAccountInfo,\n  UnparsedAccount,\n} from '@/types';\nimport { Metaplex } from '@/Metaplex';\n\n/** @group Models */\nexport type CandyGuard<T extends CandyGuardsSettings> = Model<'candyGuard'> & {\n  /** The PDA address of the Candy Guard account. */\n  readonly address: Pda;\n\n  /** Blockchain data of the Candy Guard account. */\n  readonly accountInfo: AccountInfo;\n\n  /** The address used to derive the Candy Guard's PDA. */\n  readonly baseAddress: PublicKey;\n\n  /** The address allowed to update the Candy Guard account */\n  readonly authorityAddress: PublicKey;\n\n  /**\n   * This object provides the settings for all guards in the Candy Guard.\n   *\n   * If a guard is set to `null`, it is disabled. Otherwise, it is enabled and\n   * the object contains the settings for that guard.\n   */\n  readonly guards: T;\n\n  /**\n   * This parameter allows us to create multiple minting groups that have their\n   * own set of requirements â€” i.e. guards.\n   *\n   * When groups are provided, the `guards` parameter becomes a set of default\n   * guards that will be applied to all groups. If a specific group enables\n   * a guard that is also present in the default guards, the group's guard\n   * will override the default guard.\n   *\n   * Each group functions the same way as the `guards` parameter, where a guard\n   * is enabled if and only if it is not `null`.\n   */\n  readonly groups: { label: string; guards: T }[];\n};\n\n/** @group Model Helpers */\nexport const isCandyGuard = <T extends CandyGuardsSettings>(\n  value: any\n): value is CandyGuard<T> => isModel('candyGuard', value);\n\n/** @group Model Helpers */\nexport function assertCandyGuard<T extends CandyGuardsSettings>(\n  value: any\n): asserts value is CandyGuard<T> {\n  assertModel(isCandyGuard(value), `Expected CandyGuard model`);\n}\n\n/** @group Model Helpers */\nexport const toCandyGuard = <T extends CandyGuardsSettings>(\n  account: UnparsedAccount,\n  metaplex: Metaplex\n): CandyGuard<T> => {\n  const candyGuardSerializer = createSerializerFromSolitaType(\n    MplCandyGuard,\n    candyGuardBeet.description\n  );\n  const parsedCandyGuard = deserializeAccount(account, candyGuardSerializer);\n\n  const { guards, groups } = metaplex\n    .candyMachines()\n    .guards()\n    .deserializeSettings<T>(\n      account.data.slice(CANDY_GUARD_DATA),\n      account.owner\n    );\n\n  return {\n    model: 'candyGuard',\n    address: new Pda(parsedCandyGuard.publicKey, parsedCandyGuard.data.bump),\n    accountInfo: toAccountInfo(account),\n    baseAddress: parsedCandyGuard.data.base,\n    authorityAddress: parsedCandyGuard.data.authority,\n    guards,\n    groups,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}